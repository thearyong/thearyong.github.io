---
title: 热更新与插件化学习笔记
date: 2016-07-26 23:30:35
tags: [android,插件化,热修复,热更新,hotpatch]
---
热更新与插件化最近越来越热，在求职面试也几乎是必问的知识点，掌握它的原理还是非常有必要的。github 已经有非常成熟的开源库，这次就来学习下热更新与插件化。

## 热更新和插件化
首先，我们先认识一个名词：[AOP——面向切面编程](https://baike.baidu.com/item/AOP/1332219?fr=aladdin)：**通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术**。
在实际业务中，我们会经常出现一些小 bug，但因每次重打包、更新，这些流程用户其实根本不需感知，所以才有热更新这概念，希望能像网页一样，在线更新修复。插件化更像是热更新的一个扩展方案，他们都是基于 AOP的延续。
在刚开始接触的时候，我们很容易混淆他们，所以首先我们需要对这2个概念有一个清晰的定义。

### 热更新是什么
- 用户无感知，在线更新修复 bug
- 热更新：即时生效
- 冷更新：重新启动后生效

### 插件化是什么
- 支持热更新
- 模块化，按需加载
- 代码解耦，团队协作开发

### 区别
1. 业务场景不同
2. 粒度不同

## 热更新原理
### hook

### 动态代理


## 插件化原理
### 动态加载

### 插件与宿主资源问题

### 插件与宿主交互

### 插件与插件交互

## 开源库
- [DroidPlugin](https://github.com/DroidPluginTeam/DroidPlugin)
- [RePlugin](https://github.com/Qihoo360/RePlugin)
- [VirtualApp](https://github.com/asLody/VirtualApp)
- [VirtualAPK](https://github.com/didi/VirtualAPK)
- [tech-dynamical-loading](https://github.com/kaedea/android-dynamical-loading/tree/develop/tech-dynamical-loading)
- [dynamic-load-apk](https://github.com/singwhatiwanna/dynamic-load-apk)
- [Small](https://github.com/wequick/Small)
- [Tinker](https://github.com/Tencent/tinker)
- [Robust](https://github.com/Meituan-Dianping/Robust)
- [AndFix](https://github.com/alibaba/AndFix)


## 总结
